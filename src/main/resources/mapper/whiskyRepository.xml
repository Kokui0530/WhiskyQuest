<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whisukiquest.whiskyquest_api.repository.WhiskyRepository">


  <!--User情報検索-->
  <select id="searchUserById" resultType="com.whisukiquest.whiskyquest_api.data.Users">
    SELECT * FROM users WHERE id= #{Id}
  </select>

  <!--Whisky情報検索-->
  <select id="searchWhiskyList" resultType="com.whisukiquest.whiskyquest_api.data.Whisky">
    SELECT * FROM whisky WHERE user_id= #{userId}
  </select>

  <!--Rating情報検索-->
  <select id="searchRatingList" resultType="com.whisukiquest.whiskyquest_api.data.Rating">
    SELECT * FROM rating WHERE user_id= #{userId}
  </select>

  <!--Whisky詳細検索、whiskyIdで検索-->
  <select id="searchWhisky" resultType="com.whisukiquest.whiskyquest_api.data.Whisky">
    SELECT * FROM whisky WHERE id= #{Id}
  </select>

  <!--Rating一覧検索、whiskyIdで検索-->
  <select id="searchRatingByWhiskyId" resultType="com.whisukiquest.whiskyquest_api.data.Rating">
    SELECT * FROM rating WHERE whisky_id= #{whiskyId}
  </select>

  <!--ユーザー情報の新規登録-->
  <insert id="registerUser" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO Users(user_name,mail,password)
    VALUES(#{userName} , #{mail} , #{password})
  </insert>

  <!--ウイスキー情報の新規登録-->
  <insert id="registerWhisky" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO Whisky(user_id , name , taste , drinking_style , price , memo , is_deleted)
    VALUES(#{userId} , #{name} , #{taste} , #{drinkingStyle} , #{price} , #{memo} , false)
  </insert>

  <!--評価情報の新規登録-->
  <insert id="registerRating" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO Rating(user_id , whisky_id , rating)
    VALUES(#{userId} , #{whiskyId} , #{rating})
  </insert>
</mapper>

